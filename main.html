<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>For You ü§ç</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <div class="app">
    <div class="content">
      <div class="floater">
        <img src="imagebox.png" class="image-box" alt="Surprise">
        <input type="text" placeholder="" class="overlay-input">
      </div>
    </div>
  </div>

  <audio id="bg-music" loop>
    <source src="2-23am.mp3" type="audio/mpeg">
  </audio>

  <script src="script.js"></script>
  
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      var audio = document.getElementById("bg-music");
      audio.volume = 0.5;

      var promise = audio.play();
      if (promise !== undefined) {
        promise.catch(error => {
          console.log("Autoplay was prevented. Waiting for user interaction.");
          document.body.addEventListener("click", function() {
            audio.play();
          }, { once: true });
        });
      }
    });

    document.addEventListener("DOMContentLoaded", function() {
    const inputField = document.querySelector('.overlay-input');
    const contentBox = document.querySelector('.floater'); 
    
    inputField.addEventListener('keydown', function(event) {
        if (event.key === "Enter") {
            const userInput = inputField.value.trim().toLowerCase();
            if (userInput === "pookie bear") {
                triggerSurprise();
            }
        }
    });

    function triggerSurprise() {
        contentBox.style.transition = "opacity 0.5s";
        contentBox.style.opacity = "0";
        
        setTimeout(() => {
            contentBox.style.display = "none";
            showPopupImage();
        }, 500);
    }

    function showPopupImage() {
        // 1. Wrapper
        const wrapper = document.createElement("div");
        wrapper.style.position = "fixed";
        wrapper.style.top = "50%";
        wrapper.style.left = "50%";
        wrapper.style.zIndex = "1000";
        wrapper.style.display = "flex";
        wrapper.style.flexDirection = "column";
        wrapper.style.alignItems = "center";
        
        wrapper.style.transform = "translate(-50%, -50%) scale(0)"; 
        wrapper.style.transition = "transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275)";

        // 2. Image
        const img = document.createElement("img");
        img.src = "welcome2.png"; 
        img.alt = "Welcome";
        img.style.width = "300px"; 
        img.style.height = "auto";
        
        img.style.animation = "float 3s ease-in-out infinite";
        img.style.transition = "opacity 0.5s ease";

        // 3. Append
        wrapper.appendChild(img);
        document.body.appendChild(wrapper);

        // 4. Pop-in
        setTimeout(() => {
            wrapper.style.transform = "translate(-50%, -50%) scale(1)";
        }, 50);

        // --- SEQUENCE ---

        // STEP 1: Show Welcome 2 (3.5s)
        setTimeout(() => {
            img.style.opacity = "0"; 

            setTimeout(() => {
                // Change to Welcome 3
                img.src = "welcome3.png"; 
                img.style.opacity = "1"; 

                // STEP 2: Show Welcome 3 (3.5s)
                setTimeout(() => {
                    img.style.opacity = "0"; 

                    setTimeout(() => {
                        // Change to Text 1
                        img.src = "text1.png";
                        img.style.opacity = "1"; 

                        // STEP 3: Show Text 1 (3.5s)
                        setTimeout(() => {
                            img.style.opacity = "0"; 

                            setTimeout(() => {
                                // Change to Valentines
                                img.src = "valentines1.png"; 
                                img.style.opacity = "1"; 
                                
                                // STOP FLOATING
                                img.style.animation = "none"; 

                                // ADD BUTTONS
                                addButtons(wrapper, img);

                            }, 500);

                        }, 3500); 

                    }, 500);

                }, 3500); 

            }, 500);

        }, 3500); 
    }

    function addButtons(wrapper, mainImg) {
        const btnContainer = document.createElement("div");
        
        // --- MANUAL POSITIONING SETTINGS ---
        btnContainer.style.position = "absolute"; 
        btnContainer.style.top = "85%"; 
        btnContainer.style.left = "50%";
        btnContainer.style.transform = "translate(-50%, -50%)";
        // --- END SETTINGS ---

        btnContainer.style.display = "flex";
        btnContainer.style.gap = "30px"; 
        btnContainer.style.opacity = "0";
        btnContainer.style.transition = "opacity 1s ease";
        btnContainer.style.width = "100%";
        btnContainer.style.justifyContent = "center";
        btnContainer.style.flexDirection = "row"; 

        // --- YES BUTTON LOGIC ---
        const yesBtn = document.createElement("img");
        yesBtn.src = "yes.png";
        yesBtn.style.width = "80px"; 
        yesBtn.style.cursor = "pointer";
        yesBtn.onclick = function() {
            // 1. Change Image to Yay
            mainImg.src = "yay.png";
            
            // 2. Hide Buttons
            btnContainer.style.display = "none";
            
            // 3. Pause Main Music
            var bgMusic = document.getElementById("bg-music");
            bgMusic.pause();

            // 4. Play Yay Music
            var yayAudio = new Audio('yay.mp3');
            yayAudio.volume = 0.5; 
            yayAudio.play();

            // 5. WHEN YAY ENDS -> SHOW INVITATION
            yayAudio.onended = function() {
                // Resume Main Music
                bgMusic.play();

                // Change to Invitation
                mainImg.src = "invitation.png";
                
                // Make it Larger
                mainImg.style.width = "500px"; 
                mainImg.style.maxWidth = "90vw"; // Ensures it fits on mobile screens
                mainImg.style.transition = "width 0.5s ease"; // Smooth resize
            };
        };

        // --- NO BUTTON LOGIC ---
        const noBtn = document.createElement("img");
        noBtn.src = "no.png";
        noBtn.style.width = "80px"; 
        noBtn.style.cursor = "pointer";
        noBtn.style.transition = "transform 0.2s ease"; 

        let noClickCount = 0;
        let gameOver = false;

        function avoidCursor() {
            if (gameOver) return; 

            noClickCount++;

            // --- IMAGE CHANGE LOGIC ---
            if (noClickCount === 2) {
                mainImg.src = "notfunny.png";
            } else if (noClickCount === 5) {
                mainImg.src = "stop.png";
            } else if (noClickCount === 10) {
                mainImg.src = "bahu.png";
            } else if (noClickCount === 12) {
                // --- THE SAD ENDING ---
                mainImg.src = "miming.png";
                
                gameOver = true;
                btnContainer.style.pointerEvents = "none"; 
                btnContainer.style.opacity = "0.5"; 
                
                var bgMusic = document.getElementById("bg-music");
                bgMusic.pause();
                
                var sadAudio = new Audio('sadmusic.mp3');
                sadAudio.volume = 0.5;
                sadAudio.play();
                
                return; 
            }
            
            // --- MOVEMENT LOGIC ---
            if (noClickCount <= 2) {
                // PHASE 1: SWAP POSITIONS (1st & 2nd try)
                noBtn.style.transform = "translate(0, 0)";
                
                if (btnContainer.style.flexDirection === "row") {
                    btnContainer.style.flexDirection = "row-reverse";
                } else {
                    btnContainer.style.flexDirection = "row";
                }
            } 
            else {
                // PHASE 2: MOVE RANDOMLY (Attempts 3 to 11)
                const randomX = (Math.random() - 0.5) * 200; 
                const randomY = (Math.random() - 0.5) * 200;
                
                noBtn.style.transform = `translate(${randomX}px, ${randomY}px)`;
            } 
        }

        noBtn.addEventListener("mouseover", avoidCursor);
        noBtn.addEventListener("touchstart", function(e) {
            e.preventDefault(); 
            avoidCursor();
        });

        btnContainer.appendChild(yesBtn);
        btnContainer.appendChild(noBtn);
        wrapper.appendChild(btnContainer);

        setTimeout(() => {
            btnContainer.style.opacity = "1";
        }, 100);
    }
});
  </script>

</body>
</html>